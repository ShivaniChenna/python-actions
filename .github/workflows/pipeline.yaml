name: Build and Deploy to Azure
 
on:
 push:
   branches:
    - initial_branch
 
jobs:
 build:
   runs-on: ubuntu-latest
 
   steps:
   - name: Checkout code
     uses: actions/checkout@v2
 
   - name: Set up Python
     uses: actions/setup-python@v2
     with:
      python-version: '3.10'
 
   - name: Install dependencies
     run: |
       python -m pip install --upgrade pip
       pip install -r requirements.txt
 
   #- name: Run tests
     #run: |
       #pytest
 
 deploy:
   runs-on: ubuntu-latest
   needs: build
 
   steps:
   - name: Checkout code
     uses: actions/checkout@v2
 
   - name: Set up Python
     uses: actions/setup-python@v2
     with:
      python-version: '3.10'
 
   - name: Install dependencies
     run: |
       python -m pip install --upgrade pip
       pip install -r requirements.txt
 
   - name: Deploy to Azure Web App
     uses: azure/webapps-deploy@v2
     with:
       app-name: 'Python-actions'
       slot-name: 'production'
       publish-profile: ${{ secrets.AZURE_CREDENTIALS_PUBLISH_PROFILE }}
